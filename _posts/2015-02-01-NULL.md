---
layout : post
title : C/C++ NULL
---
NULL 在C语言中定义为：

`#define NULL ((void *)0)` 把地址0转换成指针类型，称为空指针

它的特殊之处在于，操作系统不会把任何数据保存在地址0及其附近，也不会把地址0~0xfff的页面映射到物理内存，所有对地址0的访问都会立刻导致段错误

`*p=0`会导致段错误，就像放在眼前的炸弹一样很容易找到，相比之下，野指针的错误就像埋下地雷一样，更难发现和排除，这次走没事，下次走就有事

`void *`指针与其他类型的指针之间可以隐式的转换，而不必用类型转换运算符。注意，只能定义`void *`指针，而不能定义void型的变量，因为`void *`型指针和别的指针一样都占4个字节，而如果定义void型的变量，编译器不知道该分配几个字节给变量。

`void *`指针不能直接Dereference(指针所指的值)，而必须先转换成别的类型的指针在做Dereference。

```C
void func(void *pv)
{
	/*  *pv ='A' is illegal */
	char *pchar = pv;
	*pchar = 'A';
}

int main(void)
{
	char c;
	func(&c);      //传递的只能是指针
}
```