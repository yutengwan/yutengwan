---
layout : post
title : static
---

###c语言static

#### static修饰变量

static修饰变量都放在静态数据区，使得其作用域仅限于变量被定义的文件中（即从变量定义处到本文件结尾处），其它文件不论通过什么方式都不能访问。

1. 在某个函数体里面定义的静态局部变量，只能在本函数体被访问，即使同一个文件的其它函数也访问不了。
2. 静态局部变量总存储在静态数据区，所以即使这个函数运行结束，这个静态局部变量的值不会被销毁，函数下次使用时仍然要用到这个值。

#### static修饰函数

静态函数(内部函数)，用来表示不能被其它文件访问的一个函数（和用static修饰全局变量的目的一样，都是不允许其它文件访问）。这样一来便有一个好处：程序员不用担心自己编写的函数与其他文件的函数同名。

#### 特别说明

1. 静态局部变量数据属于静态存储类别，在静态存储区内分配内存单元，在整个程序运行期间都不释放。而自动变量（即动态局部变量）属于动态存储类别，占动态存储区空间而不占用静态存储区空间，函数调用结束后立即释放空间。 
2. 静态局部变量时在编译时被赋值的，即自始至终只赋值一次，在程序运行时它已经有初值。以后每次调用函数时不再重新赋初值而只是保留上次函数调用结束时的值。而自动变量赋初值，不是在编译时进行的，而是在运行时进行，所以每调用一次函数就赋一次初值。
3. 如在定义局部变量时不赋初值，则对静态局部变量来说，编译时自动赋一个初值0（对数值型变量）或空字符（对字符变量）。而对自动变量来说，如果不赋初值，则它的值是一个不确定的值。这是由每次动态分配的内存单元不同所决定的。